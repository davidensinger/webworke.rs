// ==========================================================================
//
//  Secondary
//  See _includes/sidebar.html
//
// ==========================================================================


.siteSecondary {
  @include rem(padding, $triple-spacing-unit 6%);
  color: $white-dark;
  background: $black-light;
}

.sidebarPrimary {
  width: auto;
  overflow: hidden; // create new block formatting context so text doesn’t wrap under .sidebarSecondary
}

.sidebarSecondary {
  float: left;
  @include rem(margin-right, $double-spacing-unit);
  width: 20%;

  // start breakpoints
  @include breakpoint(tablet-portrait-to-small-desktop) {
    width: 25%;
  }

  @include breakpoint(mobile-landscape-to-tablet-portrait) {
    width: 30%;
  }

  @include breakpoint(mobile-portrait-to-mobile-landscape) {
    float: none;
    width: 75%;
    @include rem(margin, 0 auto $base-spacing-unit);
  }
}


// -------------------------------------
//  Heading
// -------------------------------------

.sidebar-heading {
  @include rem(padding-bottom, $half-spacing-unit);
  border-bottom: 2px solid;
}

.sidebar-heading--top {
  @include rem(margin-bottom, $base-spacing-unit);
  @extend .hidden; // hide this initially. I know, kinda janky.

  // start breakpoints
  @include breakpoint(all-mobile) {
    display: block;
    visibility: visible;
  }
  @include breakpoint(mobile-portrait-to-mobile-landscape) {
    @include rem(margin-bottom, $one-half-spacing-unit);
  }
}

.sidebar-heading--bottom {
  margin-top: 0;

  // start breakpoints
  @include breakpoint(all-mobile) {
    display: none;
    visibility: hidden;
  }
}

.sidebar-heading--link {
  &:hover {

    // accompanying character entity
    .sidebar-character {
      color: inherit;
    }
  }

  &:focus {

    // accompanying character entity
    .sidebar-character {
      color: $focus;
    }
  }
}

.sidebar-title {
  text-transform: uppercase;
}

.sidebar-preposition {
}

.sidebar-organization {
  @extend .sidebar-title;
}

// accompanying character entity
.sidebar-character {
  color: $black-lighter;
  transition: color 0.3s;
}


// -------------------------------------
//  Description
// -------------------------------------

.sidebar-description {
  margin-bottom: 0;
}


// -------------------------------------
//  Image
// -------------------------------------

.sidebar-image {
  display: block;
  @include rem(margin, $quarter-spacing-unit 0 $half-spacing-unit);

  // image tag within .sidebar-image
  img {
    border-radius: 50%;
  }

  // start breakpoints
  @include breakpoint(mobile-portrait-to-mobile-landscape) {
    @include rem(margin, 0 0 $base-spacing-unit);
  }
}

.sidebar-caption {
  @extend .citation-small;
}

.sidebar-caption--link {
  @extend .citation-small--link;
  @extend %link-border--bottom;
}


// -------------------------------------
//  Links
// -------------------------------------

.sidebar-links--list {
  @include rem(margin-top, $base-spacing-unit);
}

.sidebar-links--link {
  position: relative; // for :after pseudo element
  @include rem(margin-bottom, $half-spacing-unit);
  display: block;
  width: 36px;
  height: 36px;
  background-image: url("../images/sprite-icons--sidebar.svg");
  background-repeat: no-repeat;

  &:active {
    @extend %link-active--depressed;
  }

  // TODO: PNG fallback for browsers that don’t support SVG
  .no-svg & {
    background-image: url("../images/sprite-icons--sidebar.png");
  }

  &:after {
    content: "";
    @include absolute(top 0 right 0 bottom 0 left 0);
    @extend .invisible;
    background-image: url("../images/sprite-icons--sidebar.svg");
    transition: opacity 0.3s;
  }

  $icons: behance, blogger, dribbble, email, facebook, flickr, github, googleplus, instagram, linkedin, pinterest, tumblr, twitter, youtube, vimeo, website;
  $i: 0;
  $offset: 36px;

  @each $icon in $icons {
    &.#{$icon} {
      background-position: $i 0;

      &:focus,
      &:hover {
        &:after {
          @extend .visible;
        }
      }
      &:focus {
        &:after {
          background-position: $i -#{$offset};
        }
      }
      &:hover {
        &:after {
          background-position: $i -#{$offset * 2};
        }
      }
    }
    $i: $i - $offset;
  }
}


// -------------------------------------
//  Tooltip
//  Hat tip to https://github.com/chinchang/hint.css
// -------------------------------------

[data-tooltip] {
  position: relative;
  &:before,
  &:after {
    position: absolute;
    @extend .invisible;
    transform: translate3d(0, 0, 0);
    transition: all 0.3s ease;
    pointer-events: none;
  }
  &:before {
    content: "";
    top: -4px;
    left: 13px;
    background-color: transparent;
    border-top: 5px solid $white;
    border-left: 5px solid transparent;
    border-right: 5px solid transparent;
  }
  &:after {
    content: attr(data-tooltip);
    top: -28px;
    left: 1px;
    @include rem(padding, $eighth-spacing-unit $quarter-spacing-unit);
    font-size: $milli-size;
    font-weight: $base-font-weight-bold;
    color: $black;
    background-color: $white;
    white-space: nowrap;
  }
  &:hover {
    &:before,
    &:after {
      @extend .visible;
      transform: translateY(-4px);
    }
  }
}
